<div class="app-shell">
  <app-spinner></app-spinner>

  <header class="app-header" *ngIf="showLayout">
    <div class="brand">
      <div class="brand-icon">MU</div>
      <div>
        <p class="eyebrow">Plataforma de Medidores electricos</p>
        <h1>{{ title }}</h1>
      </div>
    </div>
    <nav class="app-nav">
      <a routerLink="/transformers/create" routerLinkActive="active">Crear transformador</a>
      <a routerLink="/user-profile" routerLinkActive="active">Mi perfil</a>

      <div class="user-menu-container">
        <button class="user-menu-btn" (click)="toggleUserMenu()">
          <span class="user-icon">ðŸ‘¤</span>
          <span class="user-arrow">â–¼</span>
        </button>

        <div class="user-dropdown" *ngIf="showUserMenu" (click)="closeUserMenu()">
          <div class="user-dropdown-summary">
            <span class="user-name">{{ userData?.fullName || 'Usuario' }}</span>
            <span class="user-email">{{ userData?.email || 'usuario@mediup.com' }}</span>
          </div>
          <div class="dropdown-divider"></div>
          <a routerLink="/user-profile" class="dropdown-item">
            <span class="dropdown-icon">ðŸ‘¤</span>
            Ver informaciÃ³n del usuario
          </a>
          <a routerLink="/transformers/create" class="dropdown-item">
            <span class="dropdown-icon">âš¡</span>
            Crear transformador
          </a>
          <div class="dropdown-divider"></div>
          <button class="dropdown-item logout" (click)="logout()">
            <span class="dropdown-icon">ðŸšª</span>
            Cerrar sesiÃ³n
          </button>
        </div>
      </div>
    </nav>
  </header>

  <main class="app-content" [class.no-header]="!showLayout">
    <router-outlet></router-outlet>
  </main>
</div>
